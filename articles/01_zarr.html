<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1. Zarr for R • zarr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1. Zarr for R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zarr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01_zarr.html">1. Zarr for R</a></li>
    <li><a class="dropdown-item" href="../articles/02_array_basics.html">2. Working with arrays</a></li>
    <li><a class="dropdown-item" href="../articles/03_attributes.html">3. Working with attributes</a></li>
    <li><a class="dropdown-item" href="../articles/04_http.html">4. HTTP stores</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-CF/zarr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>1. Zarr for R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/R-CF/zarr/blob/v0.2.0/vignettes/articles/01_zarr.Rmd" class="external-link"><code>vignettes/articles/01_zarr.Rmd</code></a></small>
      <div class="d-none name"><code>01_zarr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="zarr">Zarr<a class="anchor" aria-label="anchor" href="#zarr"></a>
</h2>
<p>Zarr is a widely used format for the storage and retrieval of
n-dimensional array data from data stores ranging from local file
systems to the cloud. This package is a native Zarr implementation in R
with support for all required features of Zarr version 3.</p>
</div>
<div class="section level2">
<h2 id="creating-zarr-objects">Creating Zarr objects<a class="anchor" aria-label="anchor" href="#creating-zarr-objects"></a>
</h2>
<p>Creating a new Zarr object is very easy:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-CF/zarr" class="external-link">zarr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_zarr.html">create_zarr</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">z</span></span>
<span><span class="co">#&gt; &lt;Zarr&gt;</span></span>
<span><span class="co">#&gt; Version   : 3 </span></span>
<span><span class="co">#&gt; Store     : memory store </span></span>
<span><span class="co">#&gt; Arrays    : 0</span></span>
<span></span>
<span><span class="co"># The root group in the Zarr object</span></span>
<span><span class="va">z</span><span class="op">[[</span><span class="st">"/"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; &lt;Zarr group&gt; [root] </span></span>
<span><span class="co">#&gt; Path     : /</span></span></code></pre></div>
<p>With <code><a href="../reference/create_zarr.html">create_zarr()</a></code> you create a new Zarr object as a
Zarr store in memory. The Zarr object will have a root group to which
you can add other groups and arrays, or metadata in the form of
attributes (see <code>vignette("03_attributes")</code> for details).
Groups organize the Zarr object contents in a hierarchy not unlike
directories and files on the disk in your computer. You may add as many
groups as your data requires to any other group:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a group directly to the Zarr object</span></span>
<span><span class="va">grp1</span> <span class="op">&lt;-</span> <span class="va">z</span><span class="op">$</span><span class="fu">add_group</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/"</span>, name <span class="op">=</span> <span class="st">"first_group"</span><span class="op">)</span></span>
<span><span class="va">grp2</span> <span class="op">&lt;-</span> <span class="va">z</span><span class="op">$</span><span class="fu">add_group</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/"</span>, name <span class="op">=</span> <span class="st">"second_group"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Path can be compound</span></span>
<span><span class="va">z</span><span class="op">$</span><span class="fu">add_group</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/second_group"</span>, name <span class="op">=</span> <span class="st">"grp2_subgroup"</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Zarr group&gt; grp2_subgroup </span></span>
<span><span class="co">#&gt; Path     : /second_group/grp2_subgroup</span></span>
<span></span>
<span><span class="co"># Add sub-groups directly to a group</span></span>
<span><span class="va">grp1</span><span class="op">$</span><span class="fu">add_group</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"grp1_subgroup"</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Zarr group&gt; grp1_subgroup </span></span>
<span><span class="co">#&gt; Path     : /first_group/grp1_subgroup</span></span>
<span></span>
<span><span class="co"># Names may use the UTF-8 encoding</span></span>
<span><span class="va">grp1</span><span class="op">$</span><span class="fu">add_group</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"กลุ่มย่อย"</span><span class="op">)</span> <span class="co"># = subgroup in Thai</span></span>
<span><span class="co">#&gt; &lt;Zarr group&gt; กลุ่มย่อย </span></span>
<span><span class="co">#&gt; Path     : /first_group/กลุ่มย่อย</span></span>
<span></span>
<span><span class="co"># The hierarchy of groups</span></span>
<span><span class="va">z</span><span class="op">$</span><span class="fu">hierarchy</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Zarr hierarchy&gt; </span></span>
<span><span class="co">#&gt; ☰ / (root group)</span></span>
<span><span class="co">#&gt; ├ ☰ first_group</span></span>
<span><span class="co">#&gt; │ ├ ☰ grp1_subgroup</span></span>
<span><span class="co">#&gt; │ └ ☰ กลุ่มย่อย</span></span>
<span><span class="co">#&gt; └ ☰ second_group</span></span>
<span><span class="co">#&gt;   └ ☰ grp2_subgroup</span></span></code></pre></div>
<p>Group names may use UTF-8 encoded strings. This means that a large
number of languages is supported, including Latin-based languages
(<code>øßñğłþéèçàôãœčšžđńęř</code> all work), Cyrillic
(<code>Дяћѝюѯ</code>) and most Asian languages.</p>
</div>
<div class="section level2">
<h2 id="persistent-zarr-objects">Persistent Zarr objects<a class="anchor" aria-label="anchor" href="#persistent-zarr-objects"></a>
</h2>
<p>In many cases you will want to persist your Zarr data to disk. This
can be achieved by supplying a location on a file system when creating
the Zarr object. This location should not already exist and it will
become a Zarr store: a directory, with sub-directories for any added
groups and arrays. It is recommended that the name of the location has a
“.zarr” extension so that it is easily recognizable as such.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Here we use a temporary file</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".zarr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the Zarr object on disk</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_zarr.html">create_zarr</a></span><span class="op">(</span>location <span class="op">=</span> <span class="va">fn</span><span class="op">)</span></span>
<span><span class="va">z</span></span>
<span><span class="co">#&gt; &lt;Zarr&gt;</span></span>
<span><span class="co">#&gt; Version   : 3 </span></span>
<span><span class="co">#&gt; Store     : Local file system store </span></span>
<span><span class="co">#&gt; Location  : /tmp/Rtmp5mqqMM/file1df07e91d36b.zarr </span></span>
<span><span class="co">#&gt; Arrays    : 0 </span></span>
<span><span class="co">#&gt; Total size: 47 Bytes</span></span></code></pre></div>
<p>The 47 bytes of storage are taken up by a “zarr.json” file. Every
directory in a Zarr store has such a file that identifies the directory
as a Zarr group or Zarr array. For Zarr arrays the “zarr.json” file is
much bigger, and for groups files there can also be added attributes
increasing the file size.</p>
<p>After you have created the Zarr store on disk you can create groups
and arrays just as with a memory Zarr store.</p>
<p>Opening a Zarr store from file is done with <code><a href="../reference/open_zarr.html">open_zarr()</a></code>,
giving the location of the Zarr store on disk.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="other-zarr-stores">Other Zarr stores<a class="anchor" aria-label="anchor" href="#other-zarr-stores"></a>
</h2>
<p>Currently, this package supports local file system stores, online
HTTP stores and memory stores. Support for cloud-based stores will be
added in the near future.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
