<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3. Working with attributes • zarr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="3. Working with attributes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zarr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01_zarr.html">1. Zarr for R</a></li>
    <li><a class="dropdown-item" href="../articles/02_array_basics.html">2. Working with arrays</a></li>
    <li><a class="dropdown-item" href="../articles/03_attributes.html">3. Working with attributes</a></li>
    <li><a class="dropdown-item" href="../articles/04_http.html">4. HTTP stores</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-CF/zarr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>3. Working with attributes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/R-CF/zarr/blob/main/vignettes/articles/03_attributes.Rmd" class="external-link"><code>vignettes/articles/03_attributes.Rmd</code></a></small>
      <div class="d-none name"><code>03_attributes.Rmd</code></div>
    </div>

    
    
<p>Zarr groups and arrays can have attributes associated with them.
Attributes are typically character strings describing some notable
feature of a group or array, such as the physical unit of the data in an
array or the intended use of one or more arrays. Attributes may also be
numeric, such as in the case of a range of valid values for an array.
Most (simple) R objects can be used in attributes but it is not
recommended to use compound (e.g. <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>) or large objects.
Matrices and arrays should be avoided where possible because there is no
good way to indicate the storage order of the values. Attributes are
best held small for performance reasons. Attributes are stored in the
same “zarr.json” metadata files as the structural information on groups
and arrays and large attributes will thus slow down the opening and
writing of groups and arrays.</p>
<p>Attribute management is very easy, using two methods
<code>set_attribute()</code> and <code>delete_attributes()</code>,
available for both <code>zarr_group</code> and <code>zarr_array</code>
instances.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-CF/zarr" class="external-link">zarr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create an in-memory Zarr object</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_zarr.html">create_zarr</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set attributes in the root group, a.k.a. global attributes</span></span>
<span><span class="va">z</span><span class="op">[[</span><span class="st">"/"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"title"</span>, <span class="st">"Data set for intelligent analysis of foo."</span><span class="op">)</span></span>
<span><span class="va">z</span><span class="op">[[</span><span class="st">"/"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"creator"</span>, <span class="st">"ACME Inc."</span><span class="op">)</span></span>
<span><span class="va">z</span><span class="op">[[</span><span class="st">"/"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"license"</span>, <span class="st">"free (as in free lunch)"</span><span class="op">)</span></span>
<span><span class="va">z</span></span>
<span><span class="co">#&gt; &lt;Zarr&gt;</span></span>
<span><span class="co">#&gt; Version   : 3 </span></span>
<span><span class="co">#&gt; Store     : memory store </span></span>
<span><span class="co">#&gt; Arrays    : 0 </span></span>
<span><span class="co">#&gt; Attributes: (*)</span></span>
<span><span class="co">#&gt;  name    value                                    </span></span>
<span><span class="co">#&gt;  title   Data set for intelligent analysis of foo.</span></span>
<span><span class="co">#&gt;  creator ACME Inc.                                </span></span>
<span><span class="co">#&gt;  license free (as in free lunch)</span></span>
<span></span>
<span><span class="co"># Create an array and attach some attributes</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">20000</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_zarr.html">as_zarr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"bar"</span>, <span class="va">z</span><span class="op">[[</span><span class="st">"/"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">arr</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"title"</span>, <span class="st">"Bar for foo"</span><span class="op">)</span></span>
<span><span class="va">arr</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"valid_range"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"actual_range"</span>, <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span> </span>
<span><span class="co">#&gt; &lt;Zarr array&gt; bar </span></span>
<span><span class="co">#&gt; Path      : /bar </span></span>
<span><span class="co">#&gt; Data type : float64 </span></span>
<span><span class="co">#&gt; Shape     : 100 200 </span></span>
<span><span class="co">#&gt; Chunking  : 100 100 </span></span>
<span><span class="co">#&gt; Attributes: (*)</span></span>
<span><span class="co">#&gt;  name         value                                 </span></span>
<span><span class="co">#&gt;  title        Bar for foo                           </span></span>
<span><span class="co">#&gt;  valid_range  0, 1                                  </span></span>
<span><span class="co">#&gt;  actual_range 2.5581568479538e-05, 0.999872711254284</span></span></code></pre></div>
<p>You can programmatically retrieve the full set of attributes with the
<code>attributes</code> field of <code>zarr_group</code> and
<code>zarr_array</code>. The attributes are returned to the caller as a
<code>list</code>.</p>
<p>You can update or overwrite an existing attribute simply by setting
the new value for the attribute. In combination with accessing all
attributes this allows you to update an existing attribute value
too.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arr</span><span class="op">$</span><span class="fu">set_attribute</span><span class="op">(</span><span class="st">"title"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">arr</span><span class="op">$</span><span class="va">attributes</span><span class="op">[[</span><span class="st">"title"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"and baz too"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span></span>
<span><span class="co">#&gt; &lt;Zarr array&gt; bar </span></span>
<span><span class="co">#&gt; Path      : /bar </span></span>
<span><span class="co">#&gt; Data type : float64 </span></span>
<span><span class="co">#&gt; Shape     : 100 200 </span></span>
<span><span class="co">#&gt; Chunking  : 100 100 </span></span>
<span><span class="co">#&gt; Attributes: (*)</span></span>
<span><span class="co">#&gt;  name         value                                 </span></span>
<span><span class="co">#&gt;  title        Bar for foo and baz too               </span></span>
<span><span class="co">#&gt;  valid_range  0, 1                                  </span></span>
<span><span class="co">#&gt;  actual_range 2.5581568479538e-05, 0.999872711254284</span></span></code></pre></div>
<p>If you want to delete one or more attributes, use the
<code>delete_attributes()</code> method which takes a vector of
attribute names to delete.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arr</span><span class="op">$</span><span class="fu">delete_attributes</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"valid_range"</span>, <span class="st">"actual_range"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span></span>
<span><span class="co">#&gt; &lt;Zarr array&gt; bar </span></span>
<span><span class="co">#&gt; Path      : /bar </span></span>
<span><span class="co">#&gt; Data type : float64 </span></span>
<span><span class="co">#&gt; Shape     : 100 200 </span></span>
<span><span class="co">#&gt; Chunking  : 100 100 </span></span>
<span><span class="co">#&gt; Attributes: (*)</span></span>
<span><span class="co">#&gt;  name  value                  </span></span>
<span><span class="co">#&gt;  title Bar for foo and baz too</span></span></code></pre></div>
<p>The <code>(*)</code> after the the heading “Attributes:” indicates
that there are unsaved changes to the attributes, meaning that the
changes have not been persisted to a Zarr store. If you wish to persist
those changes, simply call <code>arr$save()</code>.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
