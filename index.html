<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Native and Extensible R Driver for Zarr • zarr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Native and Extensible R Driver for Zarr">
<meta name="description" content="The Zarr specification is widely used to build libraries for the storage and retrieval of n-dimensional array data from data stores ranging from local file systems to the cloud. This package is a native Zarr implementation in R with support for all required features of Zarr version 3. It is designed to be extensible such that new stores, codecs and extensions can be added easily.">
<meta property="og:description" content="The Zarr specification is widely used to build libraries for the storage and retrieval of n-dimensional array data from data stores ranging from local file systems to the cloud. This package is a native Zarr implementation in R with support for all required features of Zarr version 3. It is designed to be extensible such that new stores, codecs and extensions can be added easily.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">zarr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/01_zarr.html">1. Zarr for R</a></li>
    <li><a class="dropdown-item" href="articles/02_array_basics.html">2. Working with arrays</a></li>
    <li><a class="dropdown-item" href="articles/03_attributes.html">3. Working with attributes</a></li>
    <li><a class="dropdown-item" href="articles/04_http.html">4. HTTP stores</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-CF/zarr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="zarr">zarr<a class="anchor" aria-label="anchor" href="#zarr"></a>
</h1></div>
<!-- badges: start -->

<p><code>zarr</code> is a package to create and access Zarr stores using native R code. It is designed against the specification for Zarr core version 3. Supported stores comprise memory, the file system and HTTP.</p>
<p>Zarr v.2 stores can be read and will be represented internally in the v.3 format.</p>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>The easiest way to zarrify your data is simply to call <code><a href="reference/as_zarr.html">as_zarr()</a></code> on your R vector, matrix or array.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-CF/zarr" class="external-link">zarr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">400</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">20</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/as_zarr.html">as_zarr</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">z</span></span>
<span><span class="co">#&gt; &lt;Zarr&gt;</span></span>
<span><span class="co">#&gt; Version   : 3 </span></span>
<span><span class="co">#&gt; Store     : memory store </span></span>
<span><span class="co">#&gt; Arrays    : 1 (single array store)</span></span></code></pre></div>
<p>This uses information from the array (data type, dimensions) in combination with default Zarr settings (chunk size, data layout, compression). <code>z</code> is an in-memory <code>zarr</code> object consisting of a single array, with the R object broken up into chunks (if the dimensions are substantially large enough to warrant that) and compressed.</p>
<p>If you prefer to persist your R object to file, provide a location where you want to store the data. It is recommended that the name of the store uses the “.zarr” extension. At the same time you may give your Zarr array a name that you can later use to retrieve the array and its data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".zarr"</span><span class="op">)</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/as_zarr.html">as_zarr</a></span><span class="op">(</span><span class="va">x</span>, name <span class="op">=</span> <span class="st">"my_array"</span>, location <span class="op">=</span> <span class="va">fn</span><span class="op">)</span></span>
<span><span class="va">z</span></span>
<span><span class="co">#&gt; &lt;Zarr&gt;</span></span>
<span><span class="co">#&gt; Version   : 3 </span></span>
<span><span class="co">#&gt; Store     : Local file system store </span></span>
<span><span class="co">#&gt; Location  : /var/folders/gs/s0mmlczn4l7bjbmwfrrhjlt80000gn/T//RtmpG4NuwT/file799f7c599434.zarr </span></span>
<span><span class="co">#&gt; Arrays    : 1 </span></span>
<span><span class="co">#&gt; Total size: 1.12 KB</span></span></code></pre></div>
<p>The total size that is printed to the console when inspecting a Zarr object sums up the size of both types of files in the root directory and any sub-directories.</p>
<div class="section level5">
<h5 id="reading-and-writing-zarr-arrays">Reading and writing Zarr arrays<a class="anchor" aria-label="anchor" href="#reading-and-writing-zarr-arrays"></a>
</h5>
<p>You can access the data in a Zarr object through its arrays. If you didn’t specify a name when using function <code><a href="reference/as_zarr.html">as_zarr()</a></code>, the Zarr object can only hold a single array, which is located at the root <code>"/"</code> of the Zarr object. If you did specify a name you should indicate the full path starting with a slash <code>"/"</code> for the root:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the array using list-like access on the Zarr object</span></span>
<span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="va">z</span><span class="op">[[</span><span class="st">"/my_array"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">arr</span></span>
<span><span class="co">#&gt; &lt;Zarr array&gt; my_array </span></span>
<span><span class="co">#&gt; Path      : /my_array </span></span>
<span><span class="co">#&gt; Data type : int32 </span></span>
<span><span class="co">#&gt; Shape     : 5 20 4 </span></span>
<span><span class="co">#&gt; Chunking  : 5 20 4</span></span>
<span></span>
<span><span class="co"># Index the Zarr array like a regular R array</span></span>
<span><span class="co"># Indexes are 1-based, as usual in R (Zarr specifies everything as 0-based)</span></span>
<span><span class="va">arr</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">11</span><span class="op">:</span><span class="fl">16</span>, <span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]</span></span>
<span><span class="co">#&gt; [1,]  251  256  261  266  271  276</span></span>
<span><span class="co">#&gt; [2,]  252  257  262  267  272  277</span></span></code></pre></div>
<p>You can also write to a Zarr array, but the process is a bit more complicated (due to a quirk in R):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arr</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="op">-</span><span class="fl">99L</span>, selection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">7</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="cn">NA_integer_</span>, selection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arr</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span></span>
<span><span class="co">#&gt; [1,]   NA    6   11   16   21   26   31   36   41    46</span></span>
<span><span class="co">#&gt; [2,]   NA    7   12   17  -99  -99  -99   37   42    47</span></span>
<span><span class="co">#&gt; [3,]   NA    8   13   18  -99  -99  -99   38   43    48</span></span>
<span><span class="co">#&gt; [4,]   NA    9   14   19   24   29   34   39   44    49</span></span>
<span><span class="co">#&gt; [5,]   NA   10   15   20   25   30   35   40   45    50</span></span></code></pre></div>
<p>The data in the Zarr array is of type “int32”, the standard R integer. When writing data you should make sure that the object to be written is of the correct type, so using “-99L” and “NA_integer_” here. Numeric data is stored by default as “float64”, logical data as “int8”.</p>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Installation from CRAN of the latest release:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"zarr"</span>)</span></code></pre></div>
<p>You can install the development version of <code>zarr</code> from <a href="https://github.com/R-CF/zarr" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"R-CF/zarr"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>This package is in the early phases of development and should not be used for production environments. Things may fail and you are advised to ensure that you have backups of all data that you put in a Zarr store with this package.</p>
<p>Like Zarr itself, this package is modular and allows for additional stores, codes, transformers and extensions to be added to this basic implementation. If you have specific needs, open an <a href="https://github.com/R-CF/zarr/issues" class="external-link">issue on Github</a> or, better yet, fork the code and submit code suggestions via a pull request. Specific guidance for developers is being drafted.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=zarr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/R-CF/zarr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/R-CF/zarr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing zarr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Patrick Van Laake <br><small class="roles"> Author, maintainer, copyright holder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/R-CF/zarr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/R-CF/zarr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
